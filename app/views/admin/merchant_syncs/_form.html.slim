= simple_form_for [:admin, merchant_sync],
                  html: { class: 'space-y-8' } do |f|
  - if merchant_sync.errors.any?
    .alert.alert-error
      ul.list-disc.list-inside
        - merchant_sync.errors.each do |error|
          li= error.full_message

  .alert.alert-error
    p.flex.items-center.gap-2
      = lucide_icon 'triangle-alert'
      |< Only use this form if you now what you are doing !

  .flex.flex-col.lg:flex-row.items-center.justify-between.gap-3
    = f.input :id, disabled: true
    = f.input :started_at, html5: true, disabled: true
    = f.input :ended_at, html5: true, disabled: true

  .flex.flex-col.lg:flex-row.items-center.justify-between.gap-3
    = f.input :added_merchants_count
    = f.input :updated_merchants_count
    = f.input :soft_deleted_merchants_count

  = f.input :notes

  .divider.divider-primary Merchants payloads

  = f.input :payload_added_merchants,
            as: :text,
            input_html: { \
              rows: 18,
              value: JSON.pretty_generate(merchant_sync.payload_added_merchants).html_safe,
              class: "font-mono max-h-96" \
            }

  = f.input :payload_updated_merchants,
            as: :text,
            input_html: { \
              rows: 18,
              value: JSON.pretty_generate(merchant_sync.payload_updated_merchants).html_safe,
              class: "font-mono max-h-96" \
            }

  = f.input :payload_soft_deleted_merchants,
            as: :text,
            input_html: { \
              rows: 18,
              value: JSON.pretty_generate(merchant_sync.payload_soft_deleted_merchants).html_safe,
              class: "font-mono max-h-96" \
            }

  = f.input :payload_countries,
            as: :text,
            input_html: { \
              rows: 18,
              value: JSON.pretty_generate(merchant_sync.payload_countries).html_safe,
              class: "font-mono max-h-96" \
            }

  - if f.object.nostr_event
    .divider.divider-secondary
      | Nostr
      =< social_contact_icon(:nostr, klass: 'w-16 -ml-3')

    = f.simple_fields_for :nostr_event do |ff|
      .flex.flex-col.lg:flex-row.gap-3
        .space-y-2
          = ff.input :identifier, disabled: true
          = ff.input :event_identifier
          = ff.input :payload_response,
                    as: :text,
                    input_html: { \
                      rows: 18,
                      value: JSON.pretty_generate(ff.object.payload_response).html_safe,
                      class: "font-mono max-h-96" \
                    }

        = ff.input :payload_event,
                  as: :text,
                  input_html: { \
                    rows: 18,
                    value: JSON.pretty_generate(ff.object.payload_event).html_safe,
                    class: "font-mono max-h-96" \
                  }

  = f.button :submit
